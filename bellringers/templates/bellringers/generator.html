{% extends "bellringers/base.html" %}

{% block title %}QuickWork - Bell Ringers on Demand{% endblock %}

{% block content %}
<div class="container">
    <div class="generator-container">
        <!-- Hero Section -->
        <div class="hero-section">
            <p class="tagline">Bell ringers on demand. No fluff.</p>
        </div>

        <!-- Prompt Input -->
        <div class="prompt-input-container">
            <input
                type="text"
                id="promptInput"
                class="prompt-input"
                placeholder="Enter a word or phrase 50 chars or less."
                maxlength="50"
            >
        </div>

        <!-- Main Controls -->
        <div class="main-controls">
            <button class="btn btn-primary" id="generateBtn">Generate</button>
            <button class="btn-icon advanced-toggle" id="advancedToggleBtn" title="Show/hide advanced options">
                <span id="toggleIcon">∨</span>
            </button>
        </div>

        <!-- Advanced Options (Collapsible) -->
        <div class="advanced-options" id="advancedOptions">
            <!-- Topic Dropdown -->
            <div class="dropdown-item" id="topicItem">
                <div class="dropdown-wrapper">
                    <select class="dropdown-select" id="topicSelect">
                        {% for topic in topics %}
                        <option value="{{ topic }}">{{ topic }}</option>
                        {% endfor %}
                    </select>
                    <button class="btn-icon lock-btn" id="topicLock" title="Lock/unlock topic">🔓</button>
                </div>
            </div>

            <!-- Format Dropdown -->
            <div class="dropdown-item" id="formatItem">
                <div class="dropdown-wrapper">
                    <select class="dropdown-select" id="formatSelect">
                        {% for format in formats %}
                        <option value="{{ format }}">{{ format }}</option>
                        {% endfor %}
                    </select>
                    <button class="btn-icon lock-btn" id="formatLock" title="Lock/unlock format">🔓</button>
                </div>
            </div>

            <!-- Constraint Dropdown -->
            <div class="dropdown-item" id="constraintItem">
                <div class="dropdown-wrapper">
                    <select class="dropdown-select" id="constraintSelect">
                        {% for constraint in constraints %}
                        <option value="{{ constraint }}">{{ constraint }}</option>
                        {% endfor %}
                    </select>
                    <button class="btn-icon lock-btn" id="constraintLock" title="Lock/unlock constraint">🔓</button>
                </div>
            </div>

            <!-- Randomize Button -->
            <button class="btn btn-primary randomize-btn" id="randomizeBtn">Randomize</button>
        </div>

        <!-- Standards Selection -->
        <div class="standards-container">
            <label class="standards-label">
                📋 CS Standards (Optional):
                <span class="standards-tooltip" title="Align bell ringer with specific CS standards">ⓘ</span>
            </label>
            <div class="standards-checklist" id="standardsChecklist">
                {% for code, description in standards %}
                {% if code != "None" %}
                <label class="standards-checkbox-item">
                    <input type="checkbox" name="standards" value="{{ code }}" class="standards-checkbox">
                    <span class="standards-checkbox-label">
                        <strong>{{ code }}</strong> - {{ description[:60] }}{% if description|length > 60 %}...{% endif %}
                    </span>
                </label>
                {% endif %}
                {% endfor %}
            </div>
            <button type="button" class="btn btn-small btn-secondary" id="clearStandardsBtn">Clear All</button>
        </div>
    </div>

    <!-- Result Display -->
    <div class="result-container" id="resultContainer">
        <h2>Your Bell Ringer</h2>
        <div class="result-content" id="resultContent"></div>

        <div class="result-actions">
            <button class="btn btn-primary" id="saveBtn" onclick="saveBellRinger()">💾 Save to My Binder</button>
            <button class="btn btn-secondary" id="publishBtn" onclick="publishBellRinger()">🌍 Publish to Feed</button>
            <button class="btn btn-primary" onclick="printBellRinger()">🖨️ Print</button>
        </div>
    </div>

    <!-- Instructions -->
    <div class="card" style="margin-top: 3rem;">
        <h3>How to Use</h3>
        <ol>
            <li><strong>Quick Generate:</strong> Enter a topic or keyword and click Generate</li>
            <li><strong>Customize:</strong> Click the ∨ button to reveal advanced options</li>
            <li><strong>Lock & Randomize:</strong> Lock specific options and randomize the rest</li>
            <li><strong>Align Standards:</strong> Select CS standards to align with your curriculum</li>
            <li><strong>Save or Share:</strong> Save to your private binder or publish to the community feed</li>
        </ol>
    </div>
</div>
{% endblock %}
